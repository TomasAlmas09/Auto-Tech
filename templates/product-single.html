{% extends 'core/base.html' %}

{% block main %}
<main>
    <section class="product-detail">
        <div class="product-image">
            <img src="{{ url_for('static', filename='images/' + produto.nome + '.png') }}" alt="{{ produto.nome }}" class="animated fadeInUp">
        </div>
        <div class="details">
            <h2 class="product-name animated fadeInUp">{{ produto.nome }}</h2>
            <p><strong>Descrição:</strong> {{ produto.descricao }}</p>

            <div class="rating">
                {% for i in range(1, 6) %}
                    <span class="fa fa-star {% if produto['rating'] >= i %}checked{% endif %}"></span>
                {% endfor %}
            </div>

            <p><strong>Stock:</strong> {{ produto.estoque }} unidades disponíveis</p>

            {% if produto.stock < 10 %}
                <p class="stock-warning">Atenção: Stock baixo!</p>
            {% endif %}
            <p><strong>Quantidade:</strong></p>
            <div class="quantity-selector">
                <button class="decrease">-</button>
                <input type="number" value="1" min="1" max="{{ produto.estoque }}" id="quantity" class="quantity-input">
                <button class="increase">+</button>
            </div>

            <button class="add-to-cart animated fadeInUp">Adicionar ao Carrinho</button>

            
        </div>
    </section>
</main>
{% endblock %}

{% block scripts %}
<script>
    // Função para aumentar a quantidade
    const increaseButton = document.querySelector('.increase');
    const decreaseButton = document.querySelector('.decrease');
    const quantityInput = document.getElementById('quantity');

    increaseButton.addEventListener('click', () => {
        let currentValue = parseInt(quantityInput.value);
        if (currentValue < parseInt(quantityInput.max)) {
            quantityInput.value = currentValue + 1;
        }
    });

    decreaseButton.addEventListener('click', () => {
        let currentValue = parseInt(quantityInput.value);
        if (currentValue > 1) {
            quantityInput.value = currentValue - 1;
        }
    });
</script>
{% endblock %}
