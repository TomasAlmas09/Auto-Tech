{% extends 'core/base.html' %}

{% block main %}
<main>
    <section class="cart">
        <h2>Carrinho</h2>
        <table>
            <thead>
                <tr>
                    <th>Produto</th>
                    <th>Quantidade</th>
                    <th>Preço</th>
                    <th>Subtotal</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for item in carrinho %}
                <tr>
                    <td>{{ item.produto }}</td>
                    <td>{{ item.quantidade }}</td>
                    <td>{{ item.preco }}€</td>
                    <td>{{ item.subtotal }}€</td>
                    <td>
                        <button class="remove-button">Remover</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <p class="total"><strong>Total:</strong> {{ total }}€</p>
        <a href="{{ url_for('checkout') }}" class="checkout-button">Finalizar Compra</a>
    </section>
</main>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const removeButtons = document.querySelectorAll('.remove-button');
        removeButtons.forEach(button => {
            button.addEventListener('click', () => {
                alert('Produto removido do carrinho!');
            });
        });
    });
</script>
{% endblock %}
